//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////               overarching clone
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

DEFINE_ACTION_FUNCTION clone_area
    STR_VAR
           area_old=""
           area_new=""
           edits=""
           editstring=""
    BEGIN
         LAUNCH_ACTION_FUNCTION clone_template 
                  STR_VAR file_old=EVALUATE_BUFFER ~%area_old%~
                          file_new=EVALUATE_BUFFER ~%area_new%~
                          file_ending=~ARE~
                          edits=EVALUATE_BUFFER ~%edits%~
                          editstring=EVALUATE_BUFFER ~%editstring%~
         END
END


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////               overarching edit
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

DEFINE_ACTION_FUNCTION edit_area
    STR_VAR
           area=""
           edits=""
           editstring=""
    BEGIN
        LAUNCH_ACTION_FUNCTION clone_area STR_VAR area_old = EVALUATE_BUFFER ~%area%~ area_new = EVALUATE_BUFFER ~%area%~ edits=EVALUATE_BUFFER ~%edits%~ editstring= EVALUATE_BUFFER ~%editstring%~ END
END

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////               offsets
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

<<<<<<<< area_offsets.2da
TYPE       offset_loc      offset_length       entrynum_loc  entrynum_length   entry_length
actor      0x54            4                   0x58          2                 0x110
trigger    0x5c            4                   0x5a          2                 0xc4
spawn      0x60            4                   0x64          4                 0xc8
entrance   0x68            4                   0x6c          4                 0x68
container  0x70            4                   0x74          2                 0xc0
items      0x78            4                   0x76          2                 0x10
vertices   0x7c            4                   0x80          2                 0x4
ambients   0x84            4                   0x82          2                 0xd4
doors      0xa8            4                   0xa4          4                 0xc8
animations 0xb0            4                   0xac          4                 0x4c
tiles      0xb8            4                   0xb4          4                 0
songs      0xbc            4                   0x0           0                 0
restspawn  0xc0            4                   0x0           0                 0
mapnote    0xc4            4                   0xc8          4                0x34
explored   0xa0            4                   0x9c          4                0
>>>>>>>>
OUTER_SPRINT ~offset_readin_lookup_2da~ ~area_offsets~
OUTER_SPRINT ~offset_readin_file_prefix~ ~ARE~
LAUNCH_ACTION_MACRO read_in_offsets

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////               simple data-field edits - relative to offsets
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

ACTION_DEFINE_ASSOCIATIVE_ARRAY are_fields BEGIN
   actorname => ~0x0,ASCII20~
   script_override=>~0x50,ASCII~
   script_class => ~0x58,ASCII~
   script_race => ~0x60,ASCII~
   script_general => ~0x68,ASCII~
   script_default => ~0x70,ASCII~
   script_specifics => ~0x78,ASCII~
   crefile => ~0x80,ASCII~
   actor_x_coord => ~0x20,SHORT~
   actor_y_coord => ~0x22,SHORT~
   actor_orientation => ~0x34,SHORT~
   dialog => ~0x48,ASCII~
END

LAUNCH_ACTION_FUNCTION build_simple_data_field_editors STR_VAR lookup_table=are_fields offset_base=~offset_base~ function_prefix=ARE END


DEFINE_PATCH_FUNCTION ARE_conditional_patch
           STR_VAR arguments=""
                   filename=""
                   file_ending=""
BEGIN
     LAUNCH_PATCH_FUNCTION conditional_patch
          STR_VAR arguments=EVALUATE_BUFFER ~%arguments%~
                  filename=EVALUATE_BUFFER ~%filename%~
                  file_ending=EVALUATE_BUFFER ~%file_ending%~
     END
END
